% changeConfig
%
% A simple function for switching between different joint configurations.
% All joint configurations are stored in this function. The joint position
% is switched every time an event is triggered
%
function qj = changeConfig(t,tswitch,qj0)

% % customValues   = [ 0  0   0     0  20  0  0  0     0 -20   0  0  0     0  20   0 0   0   0      0  -20   0  0   0   0;   % q1
% %                    0  0   0     20 20  0  0  0    20 -20   0  0  0     20 20   0 0   20  0      20 -20   0  0   20  0;   % q2
% %                    0  0   0    -20 20  0  0  0   -20 -20   0  0  0    -20 20   0 0  -20  0      20 -20   0  0  -20  0;   % q3
% %                   10  0   0    -20 20  10 0  0   -20 -20  10  0  0    -20 20  10 0  -20  20    -20 -20  10  0  -20  20;  % q4
% %                  -10  0   0    -20 20 -10 0  0   -20 -20 -10  0  0    -20 20 -10 0  -20 -20    -20 -20 -10  0  -20 -20;  % q5
% %                    0  10  0     0  30  0  10 0    0  -30   0  10 0     0  30  0 -20  0   0      0  -30  0  -20  0   0;   % q6
% %                    0 -10  0     0  30  0 -10 0    0  -30   0 -10 0     0  30  0 -20  0   0      0  -30  0  -20  0   0;   % q7
% %                    0  0   20    0  20  0  0  10   0  -20   0  0  10    0  20  0  0   0   0      0  -20  0   0   0   0;   % q8
% %                    0  0  -20    0  20  0  0 -10   0  -20   0  0 -10    0  20  0  0   0   0      0  -20  0   0   0   0;]; % q9

% % % customValues =     [[-0.0350,-0.2000, 0.0400, ...                          %% state == 2  COM TRANSITION TO LEFT 
% % %                      -0.1875, 0.1000, 0.2500, 0.8700, 0.0000 ...           %
% % %                      -0.1100, 1.4000, 0.0125, 0.8700, 0.0000 ...           %
% % %                      -0.0025,-0.1100,-0.0000, 0.0000, 0.0150, 0.1500, ...  %  
% % %                       0.0000, 0.1000,-0.0025,-0.0050, 0.0075,-0.1150];     %  
% % %                     [ 0.0875,-0.2000, 0.0150, ...                          %% state == 3  LEFT FOOT BALANCING
% % %                       0.0750, 0.1000, 0.3050, 0.7925, 0.0000 ...           %    
% % %                       0.0775, 1.4000, 0.0150, 0.6200, 0.0000 ...           %
% % %                      -0.0015,-0.1100,-0.0000, 0.0000, 0.0150, 0.1650, ...  %  
% % %                       0.0000, 0.0800,-0.0025,-0.0050, 0.0075,-0.1150];     % 
% % %                     [-0.0350, 0.0775, 0.0425, ...                          %% state == 5  PREPARING FOR SWITCHING
% % %                      -0.1500, 0.8575, 0.2425, 0.8700, 0.0000 ...           %
% % %                      -0.1500, 0.8575, 0.2425, 0.8700, 0.0000 ...           %
% % %                      -0.0025,-0.1900,-0.0000,-0.0025, 0.0150, 0.1625, ...  %  
% % %                       0.0005, 0.1925,-0.0014,-0.0031  0.0075 -0.1150];     %                                  
% % %                     [-0.0875, 0.0250, 0.0150, ...                          %% state == 6  LOOKING FOR CONTACT
% % %                       0.1250, 0.9000, 0.3050, 0.7950, 0.0000 ...           %
% % %                       0.0575, 0.9000, 0.3350, 0.6225, 0.0000 ...           %
% % %                       0.0100,-0.0750,-0.0000,-0.0325, 0.0250, 0.1375, ...  %
% % %                      -0.0025, 0.0300, 0.0100,-0.0000, 0.0025,-0.0275];     %   
% % %                     [ 0.0875, 0.2000, 0.0150, ...                          %% state == 8  COM TRANSITION TO RIGHT FOOT
% % %                       0.1250, 1.4150, 0.3050, 0.7925, 0.0000 ...           %
% % %                       0.0575, 0.2575, 0.3350, 0.6225, 0.0000 ...           %
% % %                       0.0100,-0.0750,-0.0000,-0.0120, 0.0250, 0.1375, ...  %
% % %                      -0.0025, 0.0300, 0.0100,-0.0000, 0.0025,-0.0275];     % 
% % %                     [ 0.0864, 0.2000, 0.0150, ...                          %% state == 9  RIGHT FOOT BALANCING
% % %                       0.1250, 0.8125, 0.3050, 0.7925, 0.0000 ...           %    
% % %                       0.0575, 0.0800, 0.3350, 0.6225, 0.0000 ...           %
% % %                       0.0005, 0.0800,-0.0025,-0.0050, 0.0075,-0.1150, ...  %  
% % %                      -0.0025,-0.1100,-0.0000, 0.0000, 0.0150, 0.1650];     %  
% % %                     [-0.0350, 0.0775, 0.0450, ...                          %% state == 11  PREPARING FOR SWITCHING
% % %                      -0.1500, 0.8600, 0.2425, 0.8700, 0.0000 ...           %
% % %                      -0.1500, 0.8600, 0.2425, 0.8700, 0.0000 ...           %
% % %                       0.0005, 0.0800,-0.0025,-0.0050, 0.0075,-0.1150, ...  %  
% % %                      -0.0025,-0.1100,-0.0000, 0.0005, 0.0150, 0.1625]];    %                
 
% q1 =        [-0.0800,-0.1000, 0.4500, ...
%              -1.2300, 0.7000, 1.2000, 0.9950, 0.0000, ... 
%              -1.0700, 1.2000, 0.5500, 1.0950, 0.0000, ...
%               0.2100, 0.2950, 0.0005,-0.1750,-0.1045, 0.0700, ...
%               0.3485, 0.4000,-0.0005,-0.3650,-0.0550,-0.0875];
% 
% q2 =        [-0.0800,-0.1000, 0.4500, ...
%              -1.2300, 0.7000, 1.2000, 0.9950, 0.0000, ...
%              -1.0700, 1.2000, 0.5500, 1.0950, 0.0000, ...
%               0.2090, 0.2950, 0.0005,-0.1750,-0.1045, 0.0700, ... 
%               0.3715, 0.9600, 1.3250,-1.6595, 0.6375,-0.0615];
%           
% q3 =        [-0.0850,-0.4275, 0.0800,...
%               0.1400, 1.3575, 0.2475, 0.3050, 0.0000, ...
%              -0.3180, 1.3575, 0.7375, 0.3050, 0.0000, ...
%               0.2090, 0.2950, 0.0005,-0.1750,-0.1045, 0.0700, ...
%               0.3715, 0.9600, 1.3255,-1.6595, 0.6375,-0.0615];
%           
% q4 =        [-0.0850,-0.4275, 0.0800,...
%               0.1400, 1.3585, 0.2475, 0.3050, 0.0000, ...
%              -0.3150, 1.3585, 0.7375, 0.3050, 0.0000, ...
%               0.2100, 0.3475, 0.0005,-0.1750,-0.1045, 0.0700,...
%               0.3515, 1.3100, 1.3255,-0.0200, 0.6375,-0.0615];
%           
% q5 =        [-0.0800,-0.1275, 0.4500, ...
%              -1.1625, 0.6675, 0.4965, 0.9945, 0.0000, ...
%              -1.0725, 1.2900, 0.2500, 1.0950, 0.0000, ...
%               0.2090, 0.3475, 0.0005,-0.1750,-0.1050, 0.0700,...
%               0.3525, 1.3100, 1.3250,-0.0200, 0.6370,-0.0600];
%           
% q6 =        [-0.0850,-0.4275, 0.0800,...
%               0.1400, 1.3585, 0.2475, 0.3050, 0.0000, ...
%              -0.4200, 1.4585, 0.7375, 0.3025, 0.0000, ...
%               0.2100, 0.3475, 0.0005,-0.1750,-0.1075, 0.0700,...
%               0.3525, 1.3100, 1.3250,-0.0200, 0.6375,-0.0600];
%           
% q7 =        [-0.0850,-0.4275, 0.0800,...
%               0.1400, 1.3585, 0.2475, 0.3050, 0.0000, ...
%              -0.4200, 1.4585, 0.7375, 0.3025, 0.0000, ...
%               0.2100, 0.3475, 0.0005,-0.1750,-0.1075, 0.0700,...
%               0.3525, 1.3100, 1.3250,-1.6200, 0.6375,-0.0600];
%           
% q8 =        [-0.0850,-0.4275, 0.0800,...
%               0.1400, 1.3585, 0.2475, 0.3050, 0.0000, ...
%              -0.4200, 1.4585, 0.7375, 0.3025, 0.0000, ...
%               0.2100, 0.3475, 0.0005,-0.1750,-0.1075, 0.0700,...
%               0.3525, 1.3100, 1.3250,-0.0200, 0.6375,-0.0600];
%           
% for k= 1:size(customValues,1)
%     
%     customValues(k,[2 3 6 7 9 11 12 15 18 19 20 21 22 23]) = -customValues(k,[2 3 6 7 9 11 12 15 18 19 20 21 22 23]);
%    
% end


% matrix of custom joint positions [deg]

                    % torso       % left arm            % right arm           % left leg                % right leg                      
customValues   = [  0   0   0     0  45   0   0   0     0 -45   0   0   0     0  45   0   0   0   0     0 -45   0   0   0   0;   % q1
                    0   0   0    30  35   0   0   0    30 -35   0   0   0    30  35   0   0  30   0    30 -35   0   0  30   0;   % q2
                    0   0   0   -30  35   0 -40   0   -30 -35   0 -40   0   -30  35   0   0 -30   0   -30 -35   0   0 -30   0;   % q3
                    0   0   0     0  45  30   0  30     0 -35 -30   0 -30     0  35  30  30   0  30     0 -35 -30  30   0 -30;   % q4
                    0   0   0     0  45 -30   0 -30     0 -35  30   0  30     0  35 -30  30   0 -30     0 -35  30  30   0  30;   % q5
                  -10   0   0     0  45 -30   0 -30     0 -35  30   0  30     0  35 -30   0   0 -30     0 -35  30   0   0  30;   % q6
                   10   0   0     0  45 -30   0 -30     0 -35  30   0  30     0  35 -30   0   0 -30     0 -35  30   0   0  30;   % q7
                   10   0 -10     0  45 -30   0 -30     0 -35  30   0  30     0  35 -30   0   0 -30     0 -35  30   0   0  30;   % q8
                   10   0  10     0  45 -30   0 -30     0 -35  30   0  30     0  35 -30   0   0 -30     0 -35  30   0   0  30;]; % q9

% add the initial joint configuration [rad]
jointPositions = [qj0 transpose(customValues)*pi/180 qj0];
% jointPositions = [qj0 transpose(customValues(1:4,:)) qj0 transpose(customValues(5:end,:))];

% if t < tswitch(1), stay at the first configuration
qj = jointPositions(:,1);

for k = 1:length(tswitch)
    
    % if t >= tswitch(k), take the k-th configuration. Example:
    % 
    % jointPositions = [q0 q1 q2];
    % tswitch        = [10 20];
    % 
    % this means: t < 10         ---> q0 is taken
    %             10 >= t < 20   ---> q1 is taken
    %             t >= 20        ---> q2 is taken
    %
    if t >= tswitch(k)
    
        qj = jointPositions(:,k+1);
    end
    
end

end
